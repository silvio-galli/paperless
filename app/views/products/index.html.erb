<h1>
  Products
  <small class="pull-right">
    <%= link_to "New Product", new_product_path, class: 'btn btn-primary' %>
  </small>
</h1>
<br />
<div class="row">
  <div class="col-md-6">
    <div class='search-box'>
      <%= form_tag search_path, method: :get do %>
        <div class="form-group">
          <%= text_field_tag 'keyword', nil, class: 'form-control', placeholder: 'Search for product description' %>
          <%= link_to search_path, class: 'btn btn-success' do %>
            <i class="glyphicon glyphicon-search">&nbsp;</i>Search
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <table class="table table-hover">
      <tr>
        <th>Initiative</th>
        <th>Description</th>
        <th>Arriving Quantity</th>
        <th>Available Quantity</th>
        <th>Local code</th>
        <th>Default price</th>
        <th>Promo price</th>
        <th>Arriving date</th>
        <th></th>
        <th></th>
      </tr>
      <% @products.each do |product| %>
        <tr>
          <td><%= product.initiative %></td>
          <td><%= link_to product.description, product %></td>
          <td><strong><%= product.quantity %></strong> pcs.</td>
          <td><strong><%= update_quantity(product) %></strong> pcs.</td>
          <td><%= product.local_code %></td>
          <td><%= sprintf("%.2f", product.default_price) %> &euro;</td>
          <td><%= sprintf("%.2f", product.promo_price) %> &euro;</td>
          <td><%= product.arriving_date.strftime("%a, %d %b %Y") %></td>
          <td><%= link_to "Show", product_path(product) %></td>
          <td><%= link_to "Edit", edit_product_path(product) %></td>
        </tr>
      <% end %>
    </table>
  </div>
</div>
